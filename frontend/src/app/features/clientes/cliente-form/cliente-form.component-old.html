<div class='cliente-form-content'>
  <div class='header-section'>
    <h2>{{ isEditMode ? 'Editar' : 'Nuevo' }} Cliente</h2>
  </div>

  <div *ngIf='loading' class='loading'>
    <i class='fas fa-spinner fa-spin'></i> Cargando...
  </div>

  <div *ngIf='error' class='error-message'>
    <i class='fas fa-exclamation-triangle'></i> {{ error }}
  </div>

  <form [formGroup]='clienteForm' (ngSubmit)='onSubmit()' class='form-container'>
    <div class='form-row'>
      <div class='form-group'>
        <label for='nombre'>Nombre *</label>
        <input 
          type='text' 
          id='nombre' 
          formControlName='nombre' 
          class='form-control'
          [class.is-invalid]='isFieldInvalid('nombre')'
        >
        <div *ngIf='isFieldInvalid('nombre')' class='invalid-feedback'>
          {{ getFieldError('nombre') }}
        </div>
      </div>

      <div class='form-group'>
        <label for='apellido'>Apellido *</label>
        <input 
          type='text' 
          id='apellido' 
          formControlName='apellido' 
          class='form-control'
          [class.is-invalid]='isFieldInvalid('apellido')'
        >
        <div *ngIf='isFieldInvalid('apellido')' class='invalid-feedback'>
          {{ getFieldError('apellido') }}
        </div>
      </div>
    </div>

    <div class='form-row'>
      <div class='form-group'>
        <label for='cedula'>Cédula *</label>
        <input 
          type='text' 
          id='cedula' 
          formControlName='cedula' 
          class='form-control'
          [class.is-invalid]='isFieldInvalid('cedula')'
          placeholder='1234567890'
        >
        <div *ngIf='isFieldInvalid('cedula')' class='invalid-feedback'>
          {{ getFieldError('cedula') }}
        </div>
      </div>

      <div class='form-group'>
        <label for='numero'>Teléfono *</label>
        <input 
          type='text' 
          id='numero' 
          formControlName='numero' 
          class='form-control'
          [class.is-invalid]='isFieldInvalid('numero')'
          placeholder='0987654321'
        >
        <div *ngIf='isFieldInvalid('numero')' class='invalid-feedback'>
          {{ getFieldError('numero') }}
        </div>
      </div>
    </div>

    <div class='form-row'>
      <div class='form-group'>
        <label for='email'>Email</label>
        <input 
          type='email' 
          id='email' 
          formControlName='email' 
          class='form-control'
          [class.is-invalid]='isFieldInvalid('email')'
          placeholder='ejemplo@correo.com'
        >
        <div *ngIf='isFieldInvalid('email')' class='invalid-feedback'>
          {{ getFieldError('email') }}
        </div>
      </div>

      <div class='form-group'>
        <label for='fecha_nacimiento'>Fecha de Nacimiento</label>
        <input 
          type='date' 
          id='fecha_nacimiento' 
          formControlName='fecha_nacimiento' 
          class='form-control'
        >
      </div>
    </div>

    <div class='form-row'>
      <div class='form-group'>
        <label for='genero'>Género</label>
        <select id='genero' formControlName='genero' class='form-control'>
          <option value='M'>Masculino</option>
          <option value='F'>Femenino</option>
        </select>
      </div>

      <div class='form-group'>
        <label for='locacion'>Ubicación</label>
        <input 
          type='text' 
          id='locacion' 
          formControlName='locacion' 
          class='form-control'
          placeholder='Ciudad, provincia'
        >
      </div>
    </div>

    <div class='form-row'>
      <div class='form-group'>
        <label for='estado'>Estado</label>
        <select id='estado' formControlName='estado' class='form-control'>
          <option value='activo'>Activo</option>
          <option value='inactivo'>Inactivo</option>
        </select>
      </div>
    </div>

    <div class='form-actions'>
      <button type='submit' class='btn btn-primary' [disabled]='loading'>
        <i class='fas fa-save'></i>
        {{ isEditMode ? 'Actualizar' : 'Crear' }} Cliente
      </button>
      <button type='button' class='btn btn-secondary' (click)='onCancel()'>
        <i class='fas fa-times'></i>
        Cancelar
      </button>
    </div>
  </form>
</div>
          La fecha de nacimiento es requerida
        </mat-error>
      </mat-form-field>
    </div>

    <div class='form-row'>
      <mat-form-field class='full-width' appearance='outline'>
        <mat-label>Género</mat-label>
        <mat-select formControlName='genero'>
          <mat-option value='M'>Masculino</mat-option>
          <mat-option value='F'>Femenino</mat-option>
          <mat-option value='Otro'>Otro</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class='full-width' appearance='outline'>
        <mat-label>Estado</mat-label>
        <mat-select formControlName='estado'>
          <mat-option value='activo'>Activo</mat-option>
          <mat-option value='inactivo'>Inactivo</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class='form-row'>
      <mat-form-field class='full-width' appearance='outline'>
        <mat-label>Dirección</mat-label>
        <textarea matInput formControlName='direccion' rows='2'></textarea>
      </mat-form-field>

      <mat-form-field class='full-width' appearance='outline'>
        <mat-label>Ciudad</mat-label>
        <input matInput formControlName='ciudad'>
      </mat-form-field>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align='end'>
  <button mat-button (click)='onCancel()'>Cancelar</button>
  <button mat-raised-button color='primary' (click)='onSubmit()' [disabled]='clienteForm.invalid'>
    {{ isEditing ? 'Actualizar' : 'Crear' }}
  </button>
</mat-dialog-actions>
