"use strict";(self.webpackChunkspa_modern_frontend=self.webpackChunkspa_modern_frontend||[]).push([[234],{234:(U,m,s)=>{s.r(m),s.d(m,{ProductosListComponent:()=>z});var g=s(177),a=s(9417),v=s(9012),o=s(4438),f=s(9525),b=s(5826);function P(n,c){1&n&&(o.j41(0,"button",25),o.EFF(1," Editar Producto "),o.k0s())}function h(n,c){if(1&n&&(o.j41(0,"div"),o.EFF(1),o.k0s()),2&n){const t=o.XpG();o.HbH("message "+t.messageType),o.R7$(),o.SpI(" ",t.message," ")}}function C(n,c){1&n&&(o.j41(0,"div",30),o.EFF(1,"Cargando productos..."),o.k0s())}function M(n,c){if(1&n&&(o.j41(0,"div",31),o.EFF(1),o.k0s()),2&n){const t=o.XpG(2);o.R7$(),o.JRh(t.error)}}function k(n,c){if(1&n){const t=o.RV6();o.j41(0,"tr")(1,"td"),o.EFF(2),o.k0s(),o.j41(3,"td"),o.EFF(4),o.k0s(),o.j41(5,"td"),o.EFF(6),o.k0s(),o.j41(7,"td"),o.EFF(8),o.k0s(),o.j41(9,"td"),o.EFF(10),o.k0s(),o.j41(11,"td")(12,"span"),o.EFF(13),o.k0s()(),o.j41(14,"td"),o.EFF(15),o.k0s(),o.j41(16,"td"),o.EFF(17),o.k0s(),o.j41(18,"td")(19,"span"),o.EFF(20),o.k0s()(),o.j41(21,"td",36)(22,"button",37),o.bIt("click",function(){const e=o.eBV(t).$implicit,r=o.XpG(3);return o.Njj(r.editarProducto(e))}),o.EFF(23," \u270f\ufe0f "),o.k0s(),o.j41(24,"button",38),o.bIt("click",function(){const e=o.eBV(t).$implicit,r=o.XpG(3);return o.Njj(r.activarDesactivarProducto(e))}),o.EFF(25),o.k0s(),o.j41(26,"button",39),o.bIt("click",function(){const e=o.eBV(t).$implicit,r=o.XpG(3);return o.Njj(r.mostrarModalStock(e))}),o.EFF(27," \u2795 "),o.k0s(),o.j41(28,"button",40),o.bIt("click",function(){const e=o.eBV(t).$implicit,r=o.XpG(3);return o.Njj(r.eliminarProducto(e))}),o.EFF(29," \u{1f5d1}\ufe0f "),o.k0s()()()}if(2&n){const t=c.$implicit,d=o.XpG(3);o.AVh("inactive","inactivo"===t.estado),o.R7$(2),o.JRh(t.id),o.R7$(2),o.JRh(t.nombre_producto),o.R7$(2),o.JRh(t.proveedor_nombre||d.getProveedorNombre(t.proveedor_producto)),o.R7$(2),o.JRh(d.formatCurrency(t.precio_compra)),o.R7$(2),o.JRh(d.formatCurrency(t.precio_producto)),o.R7$(2),o.HbH("stock stock-"+d.getStockStatus(t.cantidad_producto)),o.R7$(),o.SpI(" ",t.cantidad_producto," "),o.R7$(2),o.JRh(t.marca_producto),o.R7$(2),o.JRh(t.categoria_producto),o.R7$(2),o.HbH("status status-"+t.estado),o.R7$(),o.SpI(" ",t.estado," "),o.R7$(4),o.HbH("btn "+("activo"===t.estado?"btn-deactivate":"btn-activate")),o.Y8G("title","activo"===t.estado?"Desactivar":"Activar"),o.R7$(),o.SpI(" ","activo"===t.estado?"\u274c":"\u2705"," ")}}function x(n,c){1&n&&(o.j41(0,"div",41),o.EFF(1," No hay productos registrados "),o.k0s())}function F(n,c){if(1&n&&(o.j41(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),o.EFF(5,"ID"),o.k0s(),o.j41(6,"th"),o.EFF(7,"Nombre"),o.k0s(),o.j41(8,"th"),o.EFF(9,"Proveedor"),o.k0s(),o.j41(10,"th"),o.EFF(11,"Precio Compra"),o.k0s(),o.j41(12,"th"),o.EFF(13,"Precio Venta"),o.k0s(),o.j41(14,"th"),o.EFF(15,"Stock"),o.k0s(),o.j41(16,"th"),o.EFF(17,"Marca"),o.k0s(),o.j41(18,"th"),o.EFF(19,"C\xf3digo"),o.k0s(),o.j41(20,"th"),o.EFF(21,"Estado"),o.k0s(),o.j41(22,"th"),o.EFF(23,"Acciones"),o.k0s()()(),o.j41(24,"tbody"),o.DNE(25,k,30,19,"tr",34),o.k0s()(),o.DNE(26,x,2,0,"div",35),o.k0s()),2&n){const t=o.XpG(2);o.R7$(25),o.Y8G("ngForOf",t.productos),o.R7$(),o.Y8G("ngIf",0===t.productos.length)}}function E(n,c){if(1&n&&(o.j41(0,"div",26),o.DNE(1,C,2,0,"div",27)(2,M,2,1,"div",28)(3,F,27,2,"div",29),o.k0s()),2&n){const t=o.XpG();o.R7$(),o.Y8G("ngIf",t.loading),o.R7$(),o.Y8G("ngIf",t.error),o.R7$(),o.Y8G("ngIf",!t.loading&&!t.error)}}function j(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El nombre del producto es requerido "),o.k0s())}function O(n,c){if(1&n&&(o.j41(0,"option",71),o.EFF(1),o.k0s()),2&n){const t=c.$implicit;o.Y8G("value",t.nombre_empresa),o.R7$(),o.SpI(" ",t.nombre_empresa," ")}}function R(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," Debe seleccionar un proveedor "),o.k0s())}function I(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El precio de compra es requerido y debe ser mayor a 0 "),o.k0s())}function T(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El precio de venta es requerido y debe ser mayor a 0 "),o.k0s())}function y(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," La cantidad es requerida y no puede ser negativa "),o.k0s())}function D(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," La marca es requerida "),o.k0s())}function G(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El c\xf3digo del producto es requerido "),o.k0s())}function S(n,c){if(1&n){const t=o.RV6();o.j41(0,"div",42)(1,"form",43,0),o.bIt("ngSubmit",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.guardarProducto())}),o.j41(3,"div",44)(4,"div",45)(5,"label",46),o.EFF(6,"Nombre del Producto *"),o.k0s(),o.j41(7,"input",47,1),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.nombre_producto,e)||(r.nuevoProducto.nombre_producto=e),o.Njj(e)}),o.k0s(),o.DNE(9,j,2,0,"div",48),o.k0s(),o.j41(10,"div",45)(11,"label",49),o.EFF(12,"Proveedor *"),o.k0s(),o.j41(13,"select",50,2),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.proveedor_producto,e)||(r.nuevoProducto.proveedor_producto=e),o.Njj(e)}),o.j41(15,"option",51),o.EFF(16,"Seleccione un proveedor"),o.k0s(),o.DNE(17,O,2,2,"option",52),o.k0s(),o.DNE(18,R,2,0,"div",48),o.k0s()(),o.j41(19,"div",44)(20,"div",45)(21,"label",53),o.EFF(22,"Precio de Compra *"),o.k0s(),o.j41(23,"input",54,3),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.precio_compra,e)||(r.nuevoProducto.precio_compra=e),o.Njj(e)}),o.k0s(),o.DNE(25,I,2,0,"div",48),o.k0s(),o.j41(26,"div",45)(27,"label",55),o.EFF(28,"Precio de Venta *"),o.k0s(),o.j41(29,"input",56,4),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.precio_producto,e)||(r.nuevoProducto.precio_producto=e),o.Njj(e)}),o.k0s(),o.DNE(31,T,2,0,"div",48),o.k0s()(),o.j41(32,"div",44)(33,"div",45)(34,"label",57),o.EFF(35,"Cantidad/Stock *"),o.k0s(),o.j41(36,"input",58,5),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.cantidad_producto,e)||(r.nuevoProducto.cantidad_producto=e),o.Njj(e)}),o.k0s(),o.DNE(38,y,2,0,"div",48),o.k0s(),o.j41(39,"div",45)(40,"label",59),o.EFF(41,"Marca *"),o.k0s(),o.j41(42,"input",60,6),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.marca_producto,e)||(r.nuevoProducto.marca_producto=e),o.Njj(e)}),o.k0s(),o.DNE(44,D,2,0,"div",48),o.k0s()(),o.j41(45,"div",44)(46,"div",45)(47,"label",61),o.EFF(48,"C\xf3digo del Producto *"),o.k0s(),o.j41(49,"input",62,7),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.categoria_producto,e)||(r.nuevoProducto.categoria_producto=e),o.Njj(e)}),o.k0s(),o.DNE(51,G,2,0,"div",48),o.k0s(),o.j41(52,"div",45)(53,"label",63),o.EFF(54,"Estado"),o.k0s(),o.j41(55,"select",64),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.estado,e)||(r.nuevoProducto.estado=e),o.Njj(e)}),o.j41(56,"option",65),o.EFF(57,"Activo"),o.k0s(),o.j41(58,"option",66),o.EFF(59,"Inactivo"),o.k0s()()()(),o.j41(60,"div",67)(61,"button",68),o.EFF(62," Guardar Producto "),o.k0s(),o.j41(63,"button",69),o.bIt("click",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.setActiveTab("list"))}),o.EFF(64," Cancelar "),o.k0s()()()()}if(2&n){const t=o.sdS(2),d=o.sdS(8),e=o.sdS(14),r=o.sdS(24),u=o.sdS(30),_=o.sdS(37),p=o.sdS(43),l=o.sdS(50),i=o.XpG();o.R7$(7),o.R50("ngModel",i.nuevoProducto.nombre_producto),o.R7$(2),o.Y8G("ngIf",d.invalid&&d.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.proveedor_producto),o.R7$(4),o.Y8G("ngForOf",i.proveedores),o.R7$(),o.Y8G("ngIf",e.invalid&&e.touched),o.R7$(5),o.R50("ngModel",i.nuevoProducto.precio_compra),o.R7$(2),o.Y8G("ngIf",r.invalid&&r.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.precio_producto),o.R7$(2),o.Y8G("ngIf",u.invalid&&u.touched),o.R7$(5),o.R50("ngModel",i.nuevoProducto.cantidad_producto),o.R7$(2),o.Y8G("ngIf",_.invalid&&_.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.marca_producto),o.R7$(2),o.Y8G("ngIf",p.invalid&&p.touched),o.R7$(5),o.R50("ngModel",i.nuevoProducto.categoria_producto),o.R7$(2),o.Y8G("ngIf",l.invalid&&l.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.estado),o.R7$(6),o.Y8G("disabled",!t.form.valid)}}function L(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El nombre del producto es requerido "),o.k0s())}function N(n,c){if(1&n&&(o.j41(0,"option",71),o.EFF(1),o.k0s()),2&n){const t=c.$implicit;o.Y8G("value",t.nombre_empresa),o.R7$(),o.SpI(" ",t.nombre_empresa," ")}}function w(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," Debe seleccionar un proveedor "),o.k0s())}function $(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El precio de compra es requerido y debe ser mayor a 0 "),o.k0s())}function V(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El precio de venta es requerido y debe ser mayor a 0 "),o.k0s())}function X(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," La cantidad es requerida y no puede ser negativa "),o.k0s())}function Y(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," La marca es requerida "),o.k0s())}function B(n,c){1&n&&(o.j41(0,"div",70),o.EFF(1," El c\xf3digo del producto es requerido "),o.k0s())}function A(n,c){if(1&n){const t=o.RV6();o.j41(0,"div",42)(1,"form",43,8),o.bIt("ngSubmit",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.guardarProducto())}),o.j41(3,"div",44)(4,"div",45)(5,"label",72),o.EFF(6,"Nombre del Producto *"),o.k0s(),o.j41(7,"input",73,9),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.nombre_producto,e)||(r.nuevoProducto.nombre_producto=e),o.Njj(e)}),o.k0s(),o.DNE(9,L,2,0,"div",48),o.k0s(),o.j41(10,"div",45)(11,"label",74),o.EFF(12,"Proveedor *"),o.k0s(),o.j41(13,"select",75,10),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.proveedor_producto,e)||(r.nuevoProducto.proveedor_producto=e),o.Njj(e)}),o.j41(15,"option",51),o.EFF(16,"Seleccione un proveedor"),o.k0s(),o.DNE(17,N,2,2,"option",52),o.k0s(),o.DNE(18,w,2,0,"div",48),o.k0s()(),o.j41(19,"div",44)(20,"div",45)(21,"label",76),o.EFF(22,"Precio de Compra *"),o.k0s(),o.j41(23,"input",77,11),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.precio_compra,e)||(r.nuevoProducto.precio_compra=e),o.Njj(e)}),o.k0s(),o.DNE(25,$,2,0,"div",48),o.k0s(),o.j41(26,"div",45)(27,"label",78),o.EFF(28,"Precio de Venta *"),o.k0s(),o.j41(29,"input",79,12),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.precio_producto,e)||(r.nuevoProducto.precio_producto=e),o.Njj(e)}),o.k0s(),o.DNE(31,V,2,0,"div",48),o.k0s()(),o.j41(32,"div",44)(33,"div",45)(34,"label",80),o.EFF(35,"Cantidad/Stock *"),o.k0s(),o.j41(36,"input",81,13),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.cantidad_producto,e)||(r.nuevoProducto.cantidad_producto=e),o.Njj(e)}),o.k0s(),o.DNE(38,X,2,0,"div",48),o.k0s(),o.j41(39,"div",45)(40,"label",82),o.EFF(41,"Marca *"),o.k0s(),o.j41(42,"input",83,14),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.marca_producto,e)||(r.nuevoProducto.marca_producto=e),o.Njj(e)}),o.k0s(),o.DNE(44,Y,2,0,"div",48),o.k0s()(),o.j41(45,"div",44)(46,"div",45)(47,"label",84),o.EFF(48,"C\xf3digo del Producto *"),o.k0s(),o.j41(49,"input",85,15),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.categoria_producto,e)||(r.nuevoProducto.categoria_producto=e),o.Njj(e)}),o.k0s(),o.DNE(51,B,2,0,"div",48),o.k0s(),o.j41(52,"div",45)(53,"label",86),o.EFF(54,"Estado"),o.k0s(),o.j41(55,"select",87),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG();return o.DH7(r.nuevoProducto.estado,e)||(r.nuevoProducto.estado=e),o.Njj(e)}),o.j41(56,"option",65),o.EFF(57,"Activo"),o.k0s(),o.j41(58,"option",66),o.EFF(59,"Inactivo"),o.k0s()()()(),o.j41(60,"div",67)(61,"button",68),o.EFF(62," Actualizar Producto "),o.k0s(),o.j41(63,"button",69),o.bIt("click",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.setActiveTab("list"))}),o.EFF(64," Cancelar "),o.k0s()()()()}if(2&n){const t=o.sdS(2),d=o.sdS(8),e=o.sdS(14),r=o.sdS(24),u=o.sdS(30),_=o.sdS(37),p=o.sdS(43),l=o.sdS(50),i=o.XpG();o.R7$(7),o.R50("ngModel",i.nuevoProducto.nombre_producto),o.R7$(2),o.Y8G("ngIf",d.invalid&&d.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.proveedor_producto),o.R7$(4),o.Y8G("ngForOf",i.proveedores),o.R7$(),o.Y8G("ngIf",e.invalid&&e.touched),o.R7$(5),o.R50("ngModel",i.nuevoProducto.precio_compra),o.R7$(2),o.Y8G("ngIf",r.invalid&&r.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.precio_producto),o.R7$(2),o.Y8G("ngIf",u.invalid&&u.touched),o.R7$(5),o.R50("ngModel",i.nuevoProducto.cantidad_producto),o.R7$(2),o.Y8G("ngIf",_.invalid&&_.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.marca_producto),o.R7$(2),o.Y8G("ngIf",p.invalid&&p.touched),o.R7$(5),o.R50("ngModel",i.nuevoProducto.categoria_producto),o.R7$(2),o.Y8G("ngIf",l.invalid&&l.touched),o.R7$(4),o.R50("ngModel",i.nuevoProducto.estado),o.R7$(6),o.Y8G("disabled",!t.form.valid)}}function H(n,c){if(1&n){const t=o.RV6();o.j41(0,"div")(1,"p")(2,"strong"),o.EFF(3,"Producto:"),o.k0s(),o.EFF(4),o.k0s(),o.j41(5,"p")(6,"strong"),o.EFF(7,"Stock actual:"),o.k0s(),o.EFF(8),o.k0s(),o.j41(9,"div",45)(10,"label",96),o.EFF(11,"Cantidad a a\xf1adir *"),o.k0s(),o.j41(12,"input",97),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG(2);return o.DH7(r.stockCantidad,e)||(r.stockCantidad=e),o.Njj(e)}),o.k0s()()()}if(2&n){const t=o.XpG(2);o.R7$(4),o.SpI(" ",t.stockProducto.nombre_producto,""),o.R7$(4),o.SpI(" ",t.stockProducto.cantidad_producto," unidades"),o.R7$(4),o.R50("ngModel",t.stockCantidad)}}function q(n,c){if(1&n){const t=o.RV6();o.j41(0,"div",88)(1,"div",89)(2,"div",90)(3,"h3"),o.EFF(4,"A\xf1adir Stock"),o.k0s(),o.j41(5,"button",91),o.bIt("click",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.cerrarModalStock())}),o.EFF(6,"\xd7"),o.k0s()(),o.j41(7,"div",92),o.DNE(8,H,13,3,"div",93),o.k0s(),o.j41(9,"div",94)(10,"button",95),o.bIt("click",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.addStock())}),o.EFF(11," A\xf1adir Stock "),o.k0s(),o.j41(12,"button",69),o.bIt("click",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.cerrarModalStock())}),o.EFF(13," Cancelar "),o.k0s()()()()}if(2&n){const t=o.XpG();o.R7$(8),o.Y8G("ngIf",t.stockProducto),o.R7$(2),o.Y8G("disabled",t.stockCantidad<=0)}}let z=(()=>{class n{constructor(t,d,e){this.router=t,this.productosService=d,this.proveedoresService=e,this.productos=[],this.proveedores=[],this.loading=!1,this.error=null,this.activeTab="list",this.isEditing=!1,this.editingProductoId=null,this.message="",this.messageType="",this.nuevoProducto={nombre_producto:"",proveedor_producto:"",precio_compra:0,precio_producto:0,cantidad_producto:0,marca_producto:"",categoria_producto:"",estado:"activo"},this.showStockModal=!1,this.stockProducto=null,this.stockCantidad=0}ngOnInit(){this.loadProductos(),this.loadProveedores()}loadProductos(){console.log("=== INICIANDO CARGA DE PRODUCTOS ==="),this.loading=!0,this.error=null,this.productosService.getProductos().subscribe({next:t=>{console.log("=== PRODUCTOS RECIBIDOS ==="),console.log("N\xfamero de productos:",t.length),console.log("Datos de productos:",t),this.productos=t,this.loading=!1},error:t=>{console.error("=== ERROR AL CARGAR PRODUCTOS ==="),console.error("Error completo:",t),this.error="Error al cargar la lista de productos",this.loading=!1}})}loadProveedores(){this.proveedoresService.getProveedores().subscribe({next:t=>{console.log("Proveedores cargados:",t),this.proveedores=t.filter(d=>"activo"===d.estado)},error:t=>{console.error("Error al cargar proveedores:",t)}})}setActiveTab(t){console.log("=== CAMBIANDO PESTA\xd1A PRODUCTOS ==="),console.log("Pesta\xf1a anterior:",this.activeTab),console.log("Nueva pesta\xf1a:",t),this.activeTab=t,"new"===t&&(this.resetForm(),this.isEditing=!1),console.log("Pesta\xf1a activa despu\xe9s del cambio:",this.activeTab)}resetForm(){this.nuevoProducto={nombre_producto:"",proveedor_producto:"",precio_compra:0,precio_producto:0,cantidad_producto:0,marca_producto:"",categoria_producto:"",estado:"activo"},this.message="",this.messageType=""}guardarProducto(){this.nuevoProducto.nombre_producto.trim()?this.nuevoProducto.proveedor_producto.trim()?this.nuevoProducto.precio_compra<=0?this.showMessage("error","El precio de compra debe ser mayor a 0"):this.nuevoProducto.precio_producto<=0?this.showMessage("error","El precio de venta debe ser mayor a 0"):this.nuevoProducto.cantidad_producto<0?this.showMessage("error","La cantidad no puede ser negativa"):(console.log("Guardando producto:",this.nuevoProducto),this.isEditing&&this.editingProductoId?this.productosService.updateProducto(this.editingProductoId,this.nuevoProducto).subscribe({next:t=>{console.log("Producto actualizado:",t),this.showMessage("success","Producto actualizado exitosamente"),this.loadProductos(),this.setActiveTab("list")},error:t=>{console.error("Error al actualizar producto:",t),this.showMessage("error","Error al actualizar el producto")}}):this.productosService.createProducto(this.nuevoProducto).subscribe({next:t=>{console.log("Producto creado:",t),this.showMessage("success","Producto registrado exitosamente"),this.loadProductos(),this.setActiveTab("list")},error:t=>{console.error("Error al crear producto:",t),this.showMessage("error","Error al registrar el producto")}})):this.showMessage("error","Debe seleccionar un proveedor"):this.showMessage("error","El nombre del producto es requerido")}editarProducto(t){this.isEditing=!0,this.editingProductoId=t.id,this.nuevoProducto={nombre_producto:t.nombre_producto,proveedor_producto:t.proveedor_producto,precio_compra:t.precio_compra,precio_producto:t.precio_producto,cantidad_producto:t.cantidad_producto,marca_producto:t.marca_producto,categoria_producto:t.categoria_producto,estado:t.estado||"activo"},this.setActiveTab("edit")}eliminarProducto(t){confirm(`\xbfEst\xe1 seguro de eliminar el producto "${t.nombre_producto}"?`)&&this.productosService.deleteProducto(t.id).subscribe({next:()=>{this.showMessage("success","Producto eliminado exitosamente"),this.loadProductos()},error:d=>{console.error("Error al eliminar producto:",d),this.showMessage("error","Error al eliminar el producto")}})}activarDesactivarProducto(t){const d="activo"===t.estado?"inactivo":"activo",e="activo"===d?"activar":"desactivar";confirm(`\xbfEst\xe1 seguro de ${e} el producto "${t.nombre_producto}"?`)&&this.productosService.updateProducto(t.id,{estado:d}).subscribe({next:()=>{this.showMessage("success",`Producto ${"activar"===e?"activado":"desactivado"} exitosamente`),this.loadProductos()},error:r=>{console.error(`Error al ${e} producto:`,r),this.showMessage("error",`Error al ${e} el producto`)}})}mostrarModalStock(t){this.stockProducto=t,this.stockCantidad=0,this.showStockModal=!0}cerrarModalStock(){this.showStockModal=!1,this.stockProducto=null,this.stockCantidad=0}addStock(){!this.stockProducto||this.stockCantidad<=0?this.showMessage("error","Debe ingresar una cantidad v\xe1lida"):this.productosService.addStock(this.stockProducto.id,this.stockCantidad).subscribe({next:()=>{this.showMessage("success",`Se a\xf1adieron ${this.stockCantidad} unidades al producto`),this.loadProductos(),this.cerrarModalStock()},error:t=>{console.error("Error al a\xf1adir stock:",t),this.showMessage("error","Error al a\xf1adir stock")}})}showMessage(t,d){this.messageType=t,this.message=d,setTimeout(()=>{this.message="",this.messageType=""},5e3)}formatCurrency(t){return new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}getProveedorNombre(t){if(isNaN(Number(t)))return t;const d=this.proveedores.find(e=>e.id===Number(t));return d?d.nombre_empresa:t}getStockStatus(t){return t<10?"low":t<50?"medium":"high"}static{this.\u0275fac=function(d){return new(d||n)(o.rXU(v.Ix),o.rXU(f.J),o.rXU(b.u))}}static{this.\u0275cmp=o.VBU({type:n,selectors:[["app-productos-list"]],standalone:!0,features:[o.aNF],decls:13,vars:10,consts:[["productoForm","ngForm"],["nombreProducto","ngModel"],["proveedorProducto","ngModel"],["precioCompra","ngModel"],["precioProducto","ngModel"],["cantidadProducto","ngModel"],["marcaProducto","ngModel"],["categoriaProducto","ngModel"],["editProductoForm","ngForm"],["editNombreProducto","ngModel"],["editProveedorProducto","ngModel"],["editPrecioCompra","ngModel"],["editPrecioProducto","ngModel"],["editCantidadProducto","ngModel"],["editMarcaProducto","ngModel"],["editCategoriaProducto","ngModel"],[1,"productos-container"],[1,"mini-menu"],[1,"tab-button",3,"click"],["class","tab-button active",4,"ngIf"],[3,"class",4,"ngIf"],[1,"tab-content"],["class","productos-list",4,"ngIf"],["class","producto-form",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"tab-button","active"],[1,"productos-list"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading"],[1,"error"],[1,"table-container"],[1,"productos-table"],[3,"inactive",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"actions"],["title","Editar",1,"btn","btn-edit",3,"click"],[3,"click","title"],["title","A\xf1adir Stock",1,"btn","btn-add-stock",3,"click"],["title","Eliminar",1,"btn","btn-delete",3,"click"],[1,"no-data"],[1,"producto-form"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","nombre_producto"],["type","text","id","nombre_producto","name","nombre_producto","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","field-error",4,"ngIf"],["for","proveedor_producto"],["id","proveedor_producto","name","proveedor_producto","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","precio_compra"],["type","number","id","precio_compra","name","precio_compra","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","precio_producto"],["type","number","id","precio_producto","name","precio_producto","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","cantidad_producto"],["type","number","id","cantidad_producto","name","cantidad_producto","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","marca_producto"],["type","text","id","marca_producto","name","marca_producto","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","categoria_producto"],["type","text","id","categoria_producto","name","categoria_producto","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","estado"],["id","estado","name","estado",1,"form-select",3,"ngModelChange","ngModel"],["value","activo"],["value","inactivo"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"field-error"],[3,"value"],["for","edit_nombre_producto"],["type","text","id","edit_nombre_producto","name","edit_nombre_producto","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit_proveedor_producto"],["id","edit_proveedor_producto","name","edit_proveedor_producto","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","edit_precio_compra"],["type","number","id","edit_precio_compra","name","edit_precio_compra","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit_precio_producto"],["type","number","id","edit_precio_producto","name","edit_precio_producto","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit_cantidad_producto"],["type","number","id","edit_cantidad_producto","name","edit_cantidad_producto","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit_marca_producto"],["type","text","id","edit_marca_producto","name","edit_marca_producto","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit_categoria_producto"],["type","text","id","edit_categoria_producto","name","edit_categoria_producto","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit_estado"],["id","edit_estado","name","edit_estado",1,"form-select",3,"ngModelChange","ngModel"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],["type","button",1,"modal-close",3,"click"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["for","stock_cantidad"],["type","number","id","stock_cantidad","min","1","placeholder","Ingrese la cantidad a a\xf1adir",1,"form-input",3,"ngModelChange","ngModel"]],template:function(d,e){1&d&&(o.j41(0,"div",16)(1,"div",17)(2,"button",18),o.bIt("click",function(){return e.setActiveTab("list")}),o.EFF(3," Productos "),o.k0s(),o.j41(4,"button",18),o.bIt("click",function(){return e.setActiveTab("new")}),o.EFF(5," Nuevo Producto "),o.k0s(),o.DNE(6,P,2,0,"button",19),o.k0s(),o.DNE(7,h,2,3,"div",20),o.j41(8,"div",21),o.DNE(9,E,4,3,"div",22)(10,S,65,17,"div",23)(11,A,65,17,"div",23),o.k0s()(),o.DNE(12,q,14,2,"div",24)),2&d&&(o.R7$(2),o.AVh("active","list"===e.activeTab),o.R7$(2),o.AVh("active","new"===e.activeTab),o.R7$(2),o.Y8G("ngIf",e.isEditing&&"edit"===e.activeTab),o.R7$(),o.Y8G("ngIf",e.message),o.R7$(2),o.Y8G("ngIf","list"===e.activeTab),o.R7$(),o.Y8G("ngIf","new"===e.activeTab),o.R7$(),o.Y8G("ngIf","edit"===e.activeTab),o.R7$(),o.Y8G("ngIf",e.showStockModal))},dependencies:[g.MD,g.Sq,g.bT,a.YN,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.YS,a.VZ,a.vS,a.cV,v.iI],styles:['@charset "UTF-8";.productos-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.mini-menu[_ngcontent-%COMP%]{display:flex;border-bottom:2px solid #e0e0e0;margin-bottom:20px;background-color:#f8f9fa;border-radius:5px 5px 0 0}.mini-menu[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{padding:12px 24px;border:none;background-color:transparent;color:#666;cursor:pointer;font-weight:500;transition:all .3s ease;border-bottom:3px solid transparent}.mini-menu[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#333}.mini-menu[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-bottom-color:#0056b3}.message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:4px;margin-bottom:20px}.message.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:16px}.error[_ngcontent-%COMP%]{color:#dc3545}.table-container[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a}.productos-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.productos-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px 10px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #dee2e6;position:sticky;top:0}.productos-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;border-bottom:1px solid #dee2e6;vertical-align:middle}.productos-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.productos-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.productos-table[_ngcontent-%COMP%]   tr.inactive[_ngcontent-%COMP%]{opacity:.6;background-color:#f8f8f8}.stock[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600}.stock.stock-bajo[_ngcontent-%COMP%]{background-color:#ffeaa7;color:#d63031}.stock.stock-medio[_ngcontent-%COMP%]{background-color:#fdcb6e;color:#e17055}.stock.stock-alto[_ngcontent-%COMP%]{background-color:#a8e6cf;color:#00b894}.status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:15px;font-size:12px;font-weight:600;text-transform:uppercase}.status.status-activo[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status.status-inactivo[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;min-width:40px}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #00000026}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn.btn-edit[_ngcontent-%COMP%]:hover{background-color:#138496}.btn.btn-activate[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn.btn-activate[_ngcontent-%COMP%]:hover{background-color:#1e7e34}.btn.btn-deactivate[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.btn.btn-deactivate[_ngcontent-%COMP%]:hover{background-color:#d39e00}.btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.btn-add-stock[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none}.btn-add-stock[_ngcontent-%COMP%]:hover{background-color:#218838}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 4px 6px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #e0e0e0}.producto-form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:30px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:8px;font-size:14px}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:12px 15px;border:2px solid #e0e0e0;border-radius:6px;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.form-input.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.form-input.ng-valid.ng-touched[_ngcontent-%COMP%], .form-select.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#28a745;box-shadow:0 0 0 3px #28a7451a}.field-error[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px;display:flex;align-items:center}.field-error[_ngcontent-%COMP%]:before{content:"\\26a0";margin-right:5px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.no-data[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666;font-size:16px;background-color:#f8f9fa;border-radius:8px;margin:20px 0}.no-data[_ngcontent-%COMP%]:before{content:"\\1f4e6";display:block;font-size:48px;margin-bottom:15px}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 992px){.productos-container[_ngcontent-%COMP%]{padding:15px}.productos-table[_ngcontent-%COMP%]{font-size:14px}.productos-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .productos-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:4px}}@media (max-width: 576px){.mini-menu[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{padding:10px 16px;font-size:14px}.producto-form[_ngcontent-%COMP%]{padding:20px 15px}}']})}}return n})()}}]);